[Unit]
Description=Streamz client
BindsTo=docker.service
After=docker.service

[Service]
Type=oneshot
Restart=on-failure
ExecStartPre=-/usr/bin/docker kill %n
ExecStartPre=-/usr/bin/docker rm %n
ExecStartPre=/usr/bin/docker pull theo01/streamz:latest
ExecStart=/usr/bin/docker run \
  --rm \
  --name %n \
  --mount 'type=volume,source=streamz,destination=/dst' \
  theo01/streamz:latest
ExecStop=/usr/bin/docker stop ${NAME}

[Install]
WantedBy=multi-user.target
